# 什么是Linux

Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和Unix的多用户、多任务、支持
多线程和多CPU的操作系统。它能运行主要的Unix工具软件、应用程序和网络协议。它支持32位和64位
硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。

# 你能告诉我一个Linux进程经历的各个阶段吗？
一个Linux进程在它的一生中，通常经历了四个主要阶段。

等待：Linux进程等待资源。
运行：Linux进程当前正在执行中。
停止：Linux进程在成功执行后或收到杀死进程信号后停止。
僵尸：如果该进程已经结束，但仍然留在进程表中，被称为‘僵尸’。

# * 内核子系统有哪些？操作系统的主要功能？

[Linux内核--五大子系统 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/616802538)

进程调度

内存管理

虚拟文件系统

网络接口

进程间通信



操作系统的主要功能是进程管理、存储管理、设备管理、文件管理、作业管理。计算机系统的资源可分为设备资源和信息资源两大类。操作系统位于底层硬件与用户之间，是两者沟通的桥梁。

1、进程管理，其工作主要是进程调度，在单用户单任务的情况下，处理器仅为一个用户的一个任务所独占， 进程管理的工作十分简单。但在多道程序或多用户的情况 下，组织多个作业或任务时，就要解决处理器的调度、 分配和回收等问题 。

2、存储管理分为几种功能：存储分配、存储共享、存储保护 、存储扩张。

3、设备管理分有以下功能：设备分配、设备传输控制 、设备独立性。

4、文件管理：文件存储空间的管理、目录管理 、文件操作管理、文件保护。

5、作业管理是负责处理用户提交的任何要求。



作者：广州市金其利Kim
链接：https://www.zhihu.com/question/485475071/answer/2122237478
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

# Unix和Linux有什么区别？

Linux和Unix都是功能强大的操作系统，都是应用广泛的服务器操作系统，有很多相似之处，甚至有一
部分人错误地认为Unix和Linux操作系统是一样的，然而，事实并非如此，以下是两者的区别。

1. 开源性
   Linux是一款开源操作系统，不需要付费，即可使用；Unix是一款对源码实行知识产权保护的传统商业
   软件，使用需要付费授权使用。
2. 跨平台性
   Linux操作系统具有良好的跨平台性能，可运行在多种硬件平台上；Unix操作系统跨平台性能较弱，大
   多需与硬件配套使用。
3. 可视化界面
   Linux除了进行命令行操作，还有窗体管理系统；Unix只是命令行下的系统。
4. 硬件环境
   Linux操作系统对硬件的要求较低，安装方法更易掌握；Unix对硬件要求比较苛刻，安装难度较大。
5. 用户群体
   Linux的用户群体很广泛，个人和企业均可使用；Unix的用户群体比较窄，多是安全性要求高的大型企
   业使用，如银行、电信部门等，或者Unix硬件厂商使用，如Sun等。

相比于Unix操作系统，Linux操作系统更受广大计算机爱好者的喜爱，主要原因是Linux操作系统具有
Unix操作系统的全部功能，并且能够在普通PC计算机上实现全部的Unix特性，开源免费的特性，更容易
普及使用！

# 什么是 Linux 内核？

Linux 系统的核心是内核。内核控制着计算机系统上的所有硬件和软件，在必要时分配硬件，并根据需
要执行软件。
 系统内存管理
 应用程序管理
 硬件设备管理
 文件系统管理

# Linux的基本组件是什么？

就像任何其他典型的操作系统一样，Linux拥有所有这些组件：内核，shell和GUI，系统实用程序和应用
程序。Linux比其他操作系统更具优势的是每个方面都附带其他功能，所有代码都可以免费下载。

# * Linux 开机启动过程？

1、主机加电自检，加载 BIOS 硬件信息。
2、读取 MBR 的引导文件(GRUB、LILO)。
3、引导 Linux 内核。
4、运行第一个进程 init (进程号永远为 1 )。
5、进入相应的运行级别。
6、运行终端，输入用户名和密码。



加载BIOS–>读取MBR–>Boot Loader–>加载内核–>用户层init一句inittab文件来设定系统运行的等

级(一般3或者5，3是多用户命令行，5是界面)–>init进程执行rc.syninit–>启动内核模块–>执行不同

级别运行的脚本程序–>执行/etc/rc.d/rc.local(本地运行服务)–>执行/bin/login,就可以登录了。

#  Linux系统缺省的运行级别？

 0 关机。

 1 单机用户模式。

 2 字符界面的多用户模式(不支持网络)。

 3 字符界面的多用户模式。

 4 未分配使用。

 5 图形界面的多用户模式。

 6 重启。



#  Linux 有哪些系统日志文件？

/var/log/boot.log

/var/log/cron

/var/log/maillog

/var/log/syslog

/var/log/wtmp last

/var/log/utmp who w 

/var/log/messages

# 什么是交换空间？

# 什么是LILO？

LILO是Linux的引导加载程序。它主要用于将Linux操作系统加载到主内存中，以便它可以开始运行。

# 常见目录说明

/bin：存放二进制可执行文件(ls,cat,mkdir等)，常用命令一般都在这里；

/etc：存放系统管理和配置文件；

/home：存放所有用户文件的根目录，是用户主目录的基点，比如用户user的主目录就

是/home/user，可以用~user表示；

**/usr** ：用于存放系统应用程序/opt：额外安装的可选应用程序包所放置的位置。一般情况

下，我们可以把tomcat等都安装到这里；

/proc：虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息；

/root：超级用户（系统管理员）的主目录（特权阶级o）；

/sbin: 存放二进制可执行文件，只有root才能访问。这里存放的是系统管理员使用的系统级

别的管理命令和程序。如ifconfig等；

/dev：用于存放设备文件；

/mnt：系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的

文件系统；

/boot：存放用于系统引导时使用的各种文件；

**/lib** ：存放着和系统运行相关的库文件 ；

/tmp：用于存放各种临时文件，是公用的临时文件存储点；

/var：用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的

日志文件（系统启动日志等。）等；

/lost+found：这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下

叫什么.chk）就在这里。

#  什么是 inode ？什么是硬链接和软链接？

 

- 硬链接不可以跨分区，软件链可以跨分区。

- 硬链接指向一个 inode 节点，而软链接则是创建一个新的 inode 节点。

- 删除硬链接文件，不会删除原文件，删除软链接文件，会把原文件删除。

# RAID 是什么?

#  **一台** **Linux** **系统初始化环境后需要做一些什么安全工作？**

1、添加普通用户登陆，禁止 root 用户登陆，更改 SSH 端口号。

 修改 SSH 端口不一定绝对哈。当然，如果要暴露在外网，建议改下。l

 2、服务器使用密钥登陆，禁止密码登陆。

 3、开启防火墙，关闭 SElinux ，根据业务需求设置相应的防火墙规则。

 4、装 fail2ban 这种防止 SSH 暴力破击的软件。

 5、设置只允许公司办公网出口 IP 能登陆服务器(看公司实际需要)

 也可以安装 VPN 等软件，只允许连接 VPN 到服务器上。

 6、修改历史命令记录的条数为 10 条。

```
sed -i 's/^HISTSIZE=1000/HISTSIZE=10' ~/bashrc

source ~/.bashrc
```



 7、只允许有需要的服务器可以访问外网，其它全部禁止。

 8、做好软件层面的防护。

 8.1 设置 nginx_waf 模块防止 SQL 注入。

 8.2 把 Web 服务使用 www 用户启动，更改网站目录的所有者和所属组为 www 。

# 标准端口的范围是

0-65535

0-1023： BSD保留端口，也叫系统端口，这些端口只有系统特许的进程才能使用；

1024~65535为用户端口，又分为：BSD临时端口(1024-5000)和BSD服务器(非特权)端口(5001-65535)。

# 实战

## 如何选择 Linux 操作系统版本?

一般来讲，桌面用户首选 Ubuntu ；服务器首选 RHEL 或 CentOS ，两者中首选 CentOS 。

根据具体要求：

**·** 安全性要求较高，则选择 Debian 或者 FreeBSD 。

**·** 需要使用数据库高级服务和电子邮件网络应用的用户可以选择 SUSE 。

**·** 想要新技术新功能可以选择 Feddora ，Feddora 是 RHEL 和 CentOS 的一个测试版和预发布版本。

**·**【重点】根据现有状况，绝大多数互联网公司选择 CentOS 。现在比较常用的是 6 系列，现在市场占有

大概一半左右。另外的原因是 CentOS 更侧重服务器领域，并且无版权约束。

CentOS 7 系列，也慢慢使用的会比较多了。

## 如何规划一台 Linux 主机，步骤是怎样？

1、确定机器是做什么用的，比如是做 WEB 、DB、还是游戏服务器。
 不同的用途，机器的配置会有所不同。
 2、确定好之后，就要定系统需要怎么安装，默认安装哪些系统、分区怎么做。
 3、需要优化系统的哪些参数，需要创建哪些用户等等的。

## 请问当用户反馈网站访问慢，如何处理？

## 有哪些方面的因素会导致网站网站访问慢？

1、服务器出口带宽不够用
 本身服务器购买的出口带宽比较小。一旦并发量大的话，就会造成分给每个用户的出口带宽就小，访
问速度自然就会慢。
 跨运营商网络导致带宽缩减。例如，公司网站放在电信的网络上，那么客户这边对接是长城宽带或联
通，这也可能导致带宽的缩减。
 2、服务器负载过大，导致响应不过来
 可以从两个方面入手分析：
 分析系统负载，使用 w 命令或者 uptime 命令查看系统负载。如果负载很高，则使用 top 命令查看
CPU ，MEM 等占用情况，要么是 CPU 繁忙，要么是内存不够。
 如果这二者都正常，再去使用 sar 命令分析网卡流量，分析是不是遭到了攻击。一旦分析出问题的原
因，采取对应的措施解决，如决定要不要杀死一些进程，或者禁止一些访问等。
 3、数据库瓶颈
 如果慢查询比较多。那么就要开发人员或 DBA 协助进行 SQL 语句的优化。
 如果数据库响应慢，考虑可以加一个数据库缓存，如 Redis 等。然后，也可以搭建 MySQL 主从，一台
MySQL 服务器负责写，其他几台从数据库负责读。
4、网站开发代码没有优化好
 例如 SQL 语句没有优化，导致数据库读写相当耗时。
- 针对网站访问慢，怎么去排查？
 1、首先要确定是用户端还是服务端的问题。当接到用户反馈访问慢，那边自己立即访问网站看看，如
  果自己这边访问快，基本断定是用户端问题，就需要耐心跟客户解释，协助客户解决问题。
  不要上来就看服务端的问题。一定要从源头开始，逐步逐步往下。
  2、如果访问也慢，那么可以利用浏览器的调试功能，看看加载那一项数据消耗时间过多，是图片加载
  慢，还是某些数据加载慢。
  3、针对服务器负载情况。查看服务器硬件(网络、CPU、内存)的消耗情况。如果是购买的云主机，比
  如阿里云，可以登录阿里云平台提供各方面的监控，比如 CPU、内存、带宽的使用情况。
  4、如果发现硬件资源消耗都不高，那么就需要通过查日志，比如看看 MySQL慢查询的日志，看看是不
  是某条 SQL 语句查询慢，导致网站访问慢。
- 怎么去解决？
 1、如果是出口带宽问题，那么久申请加大出口带宽。
  2、如果慢查询比较多，那么就要开发人员或 DBA 协助进行 SQL 语句的优化。
  3、如果数据库响应慢，考虑可以加一个数据库缓存，如 Redis 等等。然后也可以搭建MySQL 主从，
  一台 MySQL 服务器负责写，其他几台从数据库负责读。
  4、申请购买 CDN 服务，加载用户的访问。
  5、如果访问还比较慢，那就需要从整体架构上进行优化咯。做到专角色专用，多台服务器提供同一个
  服务

##  **Linux** **性能调优都有哪几种方法？**

1、Disabling daemons (关闭 daemons)。
 2、Shutting down the GUI (关闭 GUI)。
 3、Changing kernel parameters (改变内核参数)。
 4、Kernel parameters (内核参数)。
 5、Tuning the processor subsystem (处理器子系统调优)。
 6、Tuning the memory subsystem (内存子系统调优)。
 7、Tuning the file system (文件系统子系统调优)。
 8、Tuning the network subsystem（网络子系统调优)。



# 保存当前磁盘分区的分区表

```
dd if=/dev/sda of=./mbr.txt bs=1 count=512
```

